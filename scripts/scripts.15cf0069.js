"use strict";var ongeraApp=angular.module("ongeraApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","toastr","angularSpinners","moment-picker"]);ongeraApp.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){c.interceptors.push("AuthInterceptor"),b.otherwise("/"),a.state("Login",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl as main"}).state("operation",{url:"/Operation",templateUrl:"views/operation.html",controller:"OperationCtrl as operation",params:{obj:null},resolve:{result:["$http","$stateParams","$location","$q","$state","AuthTokenFactory",function(a,b,c,d,e,f){var g=d.defer();return console.log(b.obj),a.post("https://ongera-api.herokuapp.com/bk/login",b.obj).then(function(a){console.log(" it has worked"),console.log(a.data.access_token),f.setToken(a.data.access_token),g.resolve()},function(){g.reject({redirectTo:"/"}),console.log(" it has not worked")}),g.promise}]}})}]),ongeraApp.constant("API_URL","https://ongera-api.herokuapp.com/bk/"),ongeraApp.run(["$rootScope","$state",function(a,b){a.$on("$stateChangeStart",function(b,c,d,e,f){c.resolve&&(a.isLoading=!0,console.log("it is isLoading"))}),a.$on("$stateChangeSuccess",function(b,c,d,e,f){c.resolve&&(setTimeout(a.isLoading,3e3),a.isLoading=!1,console.log("it is not isLoading"))}),a.$on("$stateChangeError",function(c,d,e,f,g,h){h.redirectTo?(b.go("Login"),setTimeout(a.isLoading,3e3),a.isLoading=!1,console.log(" redirecting now")):b.go("Login")})}]),ongeraApp.directive("loginLoadingDirective",function(){return{templateUrl:"views/loading.html"}}),ongeraApp.directive("currencyList",function(){return{scope:!1,templateUrl:"currency-list.html"}}),ongeraApp.directive("currencyListTwo",function(){return{templateUrl:"currency-list-two.html"}}),ongeraApp.directive("inpuTextPopup",function(){return{templateUrl:"inpu-text-popup.html"}}),ongeraApp.directive("inpuTextPopup1",function(){return{templateUrl:"inpu-text-popup1.html"}}),ongeraApp.directive("inpuTextPopup2",function(){return{templateUrl:"inpu-text-popup2.html"}}),angular.module("ongeraApp").controller("MainCtrl",["$state","$rootScope",function(a,b){this.login="views/login.html",this.loading="views/loading.html",b.isLoading=!1,console.log(" the rootScope"+b.isLoading),this.user={username:"",password:""},this.userAutherticate=function(){a.go("operation",{obj:this.user})}}]),angular.module("ongeraApp").controller("OperationCtrl",["userService","UserFactory","spinnerService",function(a,b,c){function d(a){a&&(a.interest_rate_Init.length>5?(e.isLongEnough.isTnterest_rate_Second=!1,e.isLongEnough.isForex_rate=!1,e.isLongEnough.isInterest_rate_InitLong=!0):a.interest_rate_Init.length<5&&(e.isLongEnough.isInterest_rate_InitLong=!1),a.interest_rate_Second.length>5?(e.isLongEnough.isForex_rate=!1,e.isLongEnough.isInterest_rate_InitLong=!1,e.isLongEnough.isTnterest_rate_Second=!0):a.interest_rate_Second.length<5&&(e.isLongEnough.isTnterest_rate_Second=!1),a.forex_rate.length>5?(e.isLongEnough.isInterest_rate_InitLong=!1,e.isLongEnough.isTnterest_rate_Second=!1,e.isLongEnough.isForex_rate=!0):a.forex_rate.length<5&&(e.isLongEnough.isForex_rate=!1))}var e=this;e.isComputing=!1,e.currencyOne={symbol:"RWF"},e.currencyTwo={symbol:"USD"},e.currencyList=a.getCurrencyList(),e.oparationData=a.getOperationData(),e.operationResultData=a.getPremiumResult(),e.operationDataInit=a.getOperationDataInit(),e.isLongEnough={isInterest_rate_InitLong:!1,isTnterest_rate_Second:!1,isForex_rate:!1},e.forexData={interest_rate_Init:"",interest_rate_Second:"",forex_rate:""},e.showCurrencyListOne=!1,e.showCurrencyListFalse=!1,e.buttonClik30=function(){console.log("clicked"),e.oparationData.maturity=30},e.buttonClik90=function(){e.oparationData.maturity=90},e.buttonClik60=function(){e.oparationData.maturity=60},e.buttonClik180=function(){e.oparationData.maturity=180},e.buttonClik360=function(){e.oparationData.maturity=360},e.logout=function(){b.logout()},e.ComputePremiums=function(){e.oparationData.domestic_currency=e.currencyOne.symbol,e.oparationData.foreign_currency=e.currencyTwo.symbol,e.oparationData.pricing_date=e.pricing_date,console.log(e.oparationData),c.show("ComputeSpinner"),a.computePremium(e.oparationData,function(a){e.operationResultData=a,e.isComputing=!1,c.hide("ComputeSpinner")})},e.pickCurrency=function(a){e.currencyOne.symbol=a,console.log(e.currencyOne)},e.pickCurrencyTwo=function(a){e.currencyTwo.symbol=a,console.log(e.currencyTwo)},e.chooseCurrencyOne=function(){e.showCurrencyListOne===!1?(e.showCurrencyListTwo=!1,e.showCurrencyListOne=!0):(e.showCurrencyListOne=!1,e.showCurrencyListTwo=!1)},e.chooseCurrencyTwo=function(){e.showCurrencyListTwo===!1?(e.showCurrencyListOne=!1,e.showCurrencyListTwo=!0):(e.showCurrencyListTwo=!1,e.showCurrencyListOne=!1)},e.onInputChange=function(){d(e.forexData),console.log("On Change"),console.log(e.forexData)},console.log(e.forexData)}]),ongeraApp.service("userService",["$http","$log",function(a,b){var c=[{symbol:"USD",name:"American Dollar"},{symbol:"£",name:"Great Britain Pound"},{symbol:"RWF",name:"Rwandan Francs"},{symbol:"FBU",name:"Burandian Francs"},{symbol:"KES",name:"Kenyan Shillings"},{symbol:"UGS",name:"Uganda Shillings"}],d={pricing_date:"1-12-2016",domestic_currency:"RWF",foreign_currency:"USD",maturity:90},e={pricing_date:" ",domestic_currency:"",foreign_currency:"",maturity:""},f={user_id:"",pricing_date:"",maturity:" ",underlying:" ",min_prem:" ",max_prem:" "};this.getCurrencyList=function(){return c},this.getOperationDataInit=function(){return e},this.getOperationData=function(){return d},this.getPremiumResult=function(){return f},this.computePremium=function(c,d){a.post("https://ongera-api.herokuapp.com/premium",c).then(function(a){b.log(a.data),d(a.data)},function(a){b.error("error occurred during post")})},this.getAllCustomers=function(c){a.get("https://customerrestapi.herokuapp.com/api/customers").then(function(a){b.log(a.data),c(a.data)},function(a){b.error("error occurred during get")})}}]),ongeraApp.factory("UserFactory",["$http","API_URL","AuthTokenFactory","$q",function(a,b,c,d){function e(d){return a.post(b+"/login",d).then(function(a){return c.setToken(a.data.token),a})}function f(){c.setToken()}function g(){return c.getToken()?a.get(b+"/me"):d.reject({data:"client has no auth token"})}return{login:e,logout:f,getUser:g}}]),ongeraApp.factory("AuthTokenFactory",["$window",function(a){function b(){return d.getItem(e)}function c(a){a?d.setItem(e,a):d.removeItem(e)}var d=a.localStorage,e="auth-token";return{getToken:b,setToken:c}}]),ongeraApp.factory("AuthInterceptor",["AuthTokenFactory",function(a){function b(b){var c=a.getToken();return c&&(b.headers=b.headers||{},b.headers.Authorization="Bearer "+c),b}return{request:b}}]),angular.module("ongeraApp").run(["$templateCache",function(a){a.put("views/customer.html",'<div class="container" ng-controller="CustomerCtrl as mainCtrl" ng-cloak=""> <div class="row"> <div class="col-lg-12"> <div class="col-md-10"> <ul class="pagination"> <li><a href="" ng-click="pagination.prevPage()">&laquo;</a></li> <li ng-repeat="n in [] | range: pagination.numPages" ng-class="{active: n == pagination.page}"><a href="" ng-click="pagination.toPageId(n)">{{n + 1}}</a></li> <li><a href="" ng-click="pagination.nextPage()">&raquo;</a></li> </ul> </div> </div> </div> <div class="container MarginCusotm"> <div class="row"> <div class="col-lg-12"> <table class="table table-inverse table-bordered" id="customersTable"> <thead> <tr> <th>#</th> <th>First-Name</th> <th>Last-Name</th> <th>E-mail</th> <th>Phone-number</th> <th>Address</th> <th>Update</th> <th>Delete</th> </tr> </thead> <tbody> <tr ng-repeat="c in mainCtrl.customers "> <td>{{$index+1}}</td> <td>{{c.firstname}}</td> <td>{{c.lastname}}</td> <td>{{c.email}}</td> <td>{{c.phonenumber}}</td> <td>{{c.address}}</td> <td><button type="button" class="btn btn-sm btn-warning" ng-click="mainCtrl.showEditModal(c._id)">Edit</button></td> <td><button type="button" class="btn btn-sm btn-danger" ng-click="mainCtrl.deleteCustomer(c._id)">Delete</button></td> </tr><tr> </tr></tbody> </table> </div> </div> </div> <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" id="deleteConfirmModal" modal="  mainCtrl.deleteConfirmModal" aria-labelledby="myModalLabel"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-body"> <p> Do you want to delete this Customer?</p> </div> <div class="modal-footer"> <button type="button" class="btn btn-danger" ng-click="mainCtrl.yesDeleteModal()">Yes</button>                     <button type="button" class="btn btn-primary" ng-click="mainCtrl.noDeleteModal()">No</button> </div> </div> </div> </div> <div class="modal fade" id="myModal" tabindex="-1" role="dialog" id="editCustomerModal" modal="editCustomerModal" aria-labelledby="myModalLabel"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" id="myModalLabel">Update Customer</h4> </div> <form name="form"> <div class="modal-body" align="center"> <span>First Name</span> <input type="text" ng-required="true" style="width:30%" class="form-control" ng-model="mainCtrl.customer.firstName">                     <span>Last Name</span> <input type="text" ng-required="true" style="width:30%" class="form-control" ng-model="mainCtrl.customer.lastName">                     <span>Email</span> <input type="email" ng-required="true" style="width:30%" class="form-control" ng-model="mainCtrl.customer.email">                     <span>Phone</span> <input type="number" style="width:30%" class="form-control" ng-model="mainCtrl.customer.phone">                     <span>Address</span> <input type="text" style="width:30%" class="form-control" ng-model="mainCtrl.customer.address"> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="mainCtrl.closeEditModal()">Close</button>                     <button class="btn btn-primary" ng-click="mainCtrl.editCustomer(customer)"> Save changes</button> </div> </form> </div> </div> </div> <div class="modal fade" id="myModal" tabindex="-1" role="dialog" id="editCustomerModal" modal="editCustomerModal" aria-labelledby="myModalLabel"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" id="myModalLabel">Update Customer</h4> </div> <form name="form"> <div class="modal-body" align="center"> <span>First Name</span> <input type="text" ng-required="true" style="width:30%" class="form-control" ng-model="mainCtrl.customer.firstName">                     <span>Last Name</span> <input type="text" ng-required="true" style="width:30%" class="form-control" ng-model="mainCtrl.customer.lastName">                     <span>Email</span> <input type="email" ng-required="true" style="width:30%" class="form-control" ng-model="mainCtrl.customer.email">                     <span>Phone</span> <input type="number" style="width:30%" class="form-control" ng-model="mainCtrl.customer.phone">                     <span>Address</span> <input type="text" style="width:30%" class="form-control" ng-model="mainCtrl.customer.address"> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="mainCtrl.closeEditModal()">Close</button>                     <button class="btn btn-primary" ng-click="mainCtrl.AddCustomer(customer)"> Save changes</button> </div> </form> </div> </div> </div></div>'),a.put("views/loading.html",'<div class="loading-img"> <img class="login-logo" src="../images/loading.b72ccbd9.png" alt="loading..."> </div>'),a.put("views/login.html",'<div class=""> <img class="login-logo" src="../images/logoongera.998184df.png" alt="Ongera Logo"> </div> <div class="login-form"> <h4>Username:</h4> <input ng-model="main.user.username" type="text" placeholder="Username"><br> <h4>Password:</h4> <input ng-model="main.user.password" type="password" placeholder="Password"> <br> <input ng-click="main.userAutherticate()" type="button" value="Login" class="login-button"> <br> </div>'),a.put("views/main.html",'<div class="login" ng-controller="MainCtrl as main"> <div ng-show="isLoading==true"> <div ng-include="main.loading"></div> </div> <div ng-show="isLoading==false"> <div ng-include="main.login"></div> </div> </div>'),a.put("views/operation.html",'<div ng-controller="OperationCtrl as operation"> <script type="text/ng-template" id="inpu-text-popup.html"><div class="inpu-text-popup">\n             <input ng-model = "operation.forexData.forex_rate" type="text" name="inputText">\n           </div></script> <script type="text/ng-template" id="inpu-text-popup2.html"><div class="inpu-text-popup">\n             <input ng-model = "operation.forexData.interest_rate_Second" type="text" name="inputText">\n           </div></script> <script type="text/ng-template" id="inpu-text-popup1.html"><div class="inpu-text-popup">\n             <input ng-model = "operation.forexData.interest_rate_Init" type="text" name="inputText">\n           </div></script> <script type="text/ng-template" id="currency-list.html"><div class="currenciesList">\n              <ul ng-repeat ="currency in operation.currencyList">\n                <li ng-click="operation.pickCurrency(currency.symbol)"><a>{{currency.symbol}}-{{currency.name}}</a></li>   \n              </ul>\n            </div></script> <script type="text/ng-template" id="currency-list-two.html"><div class="currenciesListTwo">\n              <ul ng-repeat ="currency in operation.currencyList">\n                <li ng-click="operation.pickCurrencyTwo(currency.symbol)"><a >{{currency.symbol}}-{{currency.name}}</a></li>   \n              </ul>\n            </div></script> <!-- mugustave --> <div class="appHeader"> <div class="box"> <p class="redText date">Tuesday,March 02,2017</p> <p class="blackText time">@ 02:00 P.M </p> </div> <div class="box"> <img class="img-responsive operationlogo" src="../images/logoongera.998184df.png" alt="logo..."> </div> <div class="box userInfo"> <div class=""> <img class="img-responsive operationlogo" src="../images/profile-pic.cb9da64a.png" alt="profile..."> </div> <div class="userDeatails"> <p class="redText Welcome">Welcome back</p> <p class="blackText name">Fabrice Benimana</p> <p class="redText">Last Logged In</p> <p class="blackText">11days 18h 50m </p> </div> <div class="headerButton"> <img class="img-responsive logoutbtn" src="../images/logout.3d058ee8.png" alt="logout..."> <img class="img-responsive settingbtn" src="../images/setting.3412b4dc.png" alt="setting..."> </div> </div> </div> <div class="mainBody"> <div class="mainVertical"> <div> <img class="img-responsive imageSide" src="../images/learn-more.e36bee67.png" alt="learn more"> </div> <div> <img class="img-responsive imageSide" src="../images/upload-data.9f227f8b.png" alt="upload-data..."> </div> <div> <img class="img-responsive imageSide" src="../images/practice.949f16dc.png" alt="practice.."> </div> <div class="mainSideHorizontal"> <div> <img class="img-responsive imageSideButton" src="../images/email.83c8ec4b.png" alt="email.."> </div> <div> <img class="img-responsive imageSideButton" src="../images/chat.4c074654.png" alt="chat.."> </div> </div> <!--   	  </div>\n	 --> </div> <div class="mainSection-inner"> <p class="getIntoOperations"> GET INTO OPERATIONS</p> <div class="innerSection"> <div class="operationData"> <div class="chooseCurrency"> <p class="One">Choose your couple of currencies</p> <p class="Other">Local Currency</p> <p class="Other">Foreign Currency</p> </div> <div class="chooseCurrencyBtn"> <div class="currencies"> </div> <div class="currencies1"> <button ng-click="operation.chooseCurrencyOne()" class="RWF">{{ operation.currencyOne.symbol}}</button> </div> <div currency-list ng-if="operation.showCurrencyListOne == true"></div> <div class="currencies1"> <button ng-click="operation.chooseCurrencyTwo()" class="USD">{{operation.currencyTwo.symbol}}</button> </div> <div currency-list-two go="operation.pickCurrency()" ng-if="operation.showCurrencyListTwo == true"></div> </div> <div class="titleCurrencyCharacteristics"> <p class="titleCC">Charactarize each of your currencies</p> <p class="OtherHidden"></p> <p class="OtherHidden"></p> </div> <div class="operationFeaturesChar"> <div class="titleInner"> <p class="titleIR">Interest Rate</p> </div> <div class="OtherHiddenFeature"> <input ng-click="myInputStyle={background:\'#222b3a\'}" ng-style="myInputStyle" ng-change="operation.onInputChange()" ng-model="operation.forexData.interest_rate_Init" type="text" name="InterestRate" class="InterestRateIT"> <div inpu-text-popup1 ng-if="operation.isLongEnough.isInterest_rate_InitLong == true"></div> </div> <div class="OtherHiddenFeature"> <input ng-click="myInputStyle1={background:\'#222b3a\'}" ng-style="myInputStyle1" ng-change="operation.onInputChange()" ng-model="operation.forexData.interest_rate_Second" type="text" name="InterestRate1" class="InterestRateIT"> <div inpu-text-popup2 ng-if="operation.isLongEnough.isTnterest_rate_Second == true"></div> </div> </div> <div class="operationFeaturesChar"> <div class="titleInner2"> <p class="titleIR2">Forex Rate</p> </div> <div class="OtherHiddenFeature2"> <input ng-click="myInputStyle2={background:\'#222b3a\'}" ng-style="myInputStyle2" ng-change="operation.onInputChange()" ng-model="operation.forexData.forex_rate" type="text" name="Forex Rate" class="InterestRateIT"> <div inpu-text-popup ng-if="operation.isLongEnough.isForex_rate == true"></div> </div> <!-- <div class="OtherHiddenFeature">\n		 	        <input type="text" name="Forex Rate1" class="InterestRateIT" />\n		 	        </div> --> </div> <div class="operationFeaturesChar"> <div class="titleInner"> <p class="titleIR">Price Date</p> </div> <div class="OtherHiddenFeature"> <button class="InterestRateIT">Now</button> </div> <div class="OtherHiddenFeature"> <div class="input-group" moment-picker="operation.pricing_date" format="DD-MM-YYYY"> <span class="input-group-addon"> <i> <img class="calendar_icon" src="../images/octicons_calendar.f47629da.png"></i> </span> <input class="form-control" placeholder="Select a date" ng-model="operation.pricing_date" ng-model-options="{ updateOn: \'blur\' }"> </div> </div> </div> <div class="operationFeaturesChar"> <div class="titleInner"> <p class="titleMT">Maturity Time</p> </div> <div class="OtherHiddenFeature"> <div class="firstLine"> <div class=""> <button ng-click="operation.buttonClik30()" class="maturityTimeBtn">30</button> </div> <div class=""> <button ng-click="operation.buttonClik60()" class="maturityTimeBtn">60</button> </div> <div class=""> <button ng-click="operation.buttonClik180()" class="maturityTimeBtn">180</button> </div> </div> <div class="seCondLine"> <div class=""> <button ng-click="operation.buttonClik90()" class="maturityTimeBtn">90</button> </div> <div class=""> <button ng-click="operation.buttonClik360()" class="maturityTimeBtn">360</button> </div> <div class=""> <input ng-model="operation.oparationData.maturity" class="maturityTimeBtnType" type="text" name="MaturityTypes" placeholder="type"> </div> </div> </div> <div class="OtherHiddenFeature"> <!-- 		             <button class="MaturityDateBtn">Maturity date</button>\n --> <div class="input-group" moment-picker="operation.maturity" format="DD-MM-YYYY"> <span class="input-group-addon"> <i> <img class="calendar_icon" src="../images/octicons_calendar.f47629da.png"></i> </span> <input class="form-control" placeholder="Maturity date" ng-model="operation.maturity" ng-model-options="{ updateOn: \'blur\' }"> </div> </div> </div> <div class="operationFeaturesChar"> <div class="titleInner"> <p class="ExpectedDeprecitionBtn">Expected Depreciation</p> </div> <div class="OtherHiddenFeature"> <button class="typeBtn">Type</button> </div> <div class="OtherHiddenFeature"> <button ng-click="operation.ComputePremiums()" class="computeBtn">HIT HERE AT THE END TO COMPUTE YOUR PREMIUM</button> </div> <spinner class="spin" name="ComputeSpinner" img-src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/10607/spinner1.gif"></spinner> </div> </div> <div class="operationResults"> <p class="yourInsightTitle"> Your Insights</p> <p class="yourClientPremium"> Your Client\'s Premium</p> <div class="InsightsRange"> <p class="yourClientPremiumHidden"> </p> <p class="yourClientPremiumMin">Min </p> <p class="yourClientPremiumMin">Max </p> </div> <div class="InsightsRange"> <p class="yourClientPremiumMin">Value </p> <div class="yourClientBtn"> <button class="insigRoundButton">{{operation.operationResultData.min_prem}}</button> </div> <div class="yourClientBtn"> <button class="insigRoundButton">{{operation.operationResultData.max_prem}}</button> </div> </div> <div class="InsightsRange"> <p class="yourClientPremiumMin">Percentage </p> <div class="yourClientBtn"> <button class="insigRoundButton">32%</button> </div> <div class="yourClientBtn"> <button class="insigRoundButton">52%</button> </div> </div> <p class="yourClientPremiumLongText"> <strong>Customize Comments</strong><br> premium is the first estimate based on the <br> figures exposed during our meeting/on the phone.<br> Thanks for your trust and we look forward to sign the<br> related contract soon</p> <p class="yourClientPremium"> What to do next ?</p> <div class="InsightsRange"> <p class="yourClientPremiumMin">Print </p> <p class="yourClientPremiumMin">Save as Model </p> <p class="yourClientPremiumMin">Plot Graph</p> </div> <br> </div> </div> </div> </div> </div> <script>function ng-changeBackground() {\n		Console.log("color change")\n	    document.body.style.background = "red";\n	}</script>')}]);